# -*- coding: utf-8 -*-
# 巴士时间
from time import localtime, asctime

def routine():
    xyday = [(7,20),(7,25),(7,30),(7,35),(7,40),(8,0),(8,10),(8,20),(8,30),(8,40),(8,50),(9,0),(9,20),(9,40),(9,50),(9,55),(10,0),(10,5),(10,20),(10,40),(11,0),(11,20),(11,40),(12,0),(12,10),(12,20),(12,30),(12,40),(13,0),(13,20),(13,30),(13,35),(13,40),(14,0),(14,20),(14,40),(15,0),(15,20),(15,40),(15,50),(15,55),(16,0),(16,5),(16,20),(16,40),(17,0),(17,10),(17,20),(17,30),(17,40),(17,50),(18,0),(18,20),(18,40),(19,0),(19,30),(20,0),(20,30),(21,0)]
    kyday = [(7,40),(7,50),(8,0),(8,10),(8,20),(8,30),(8,40),(8,50),(9,0),(9,20),(9,40),(9,55),(10,0),(10,5),(10,10),(10,20),(10,40),(11,0),(11,20),(11,40),(12,0),(12,10),(12,20),(12,30),(12,40),(13,0),(13,20),(13,40),(14,0),(14,20),(14,40),(15,0),(15,20),(15,40),(15,50),(15,55),(16,0),(16,5),(16,20),(16,40),(17,0),(17,10),(17,20),(17,30),(17,40),(17,50),(18,0),(18,10),(18,20),(18,30),(18,40),(19,0),(19,30),(20,20),(21,20),(22,0)]
    xyend = [(7,30),(8,0),(8,30),(9,0),(9,30),(10,0),(10,30),(11,0),(11,30),(12,0),(12,30),(13,0),(13,30),(14,0),(14,30),(15,0),(15,30),(16,0),(16,30),(17,0),(17,30),(18,0),(19,0),(20,0),(21,0)]
    kyend = [(7,50),(8,20),(8,50),(9,20),(9,50),(10,20),(10,50),(11,20),(11,50),(12,20),(12,50),(13,20),(13,50),(14,20),(14,50),(15,20),(15,50),(16,20),(16,50),(17,20),(17,50),(18,20),(19,20),(20,20),(21,20),(21,50),(22,0)]
    return {'xyday':xyday, 'kyday':kyday, 'xyend':xyend, 'kyend':kyend}
def bustimereturn(s):
    cur_time = localtime()
    cur_hour,cur_min = cur_time[3],cur_time[4]
    dct      = routine()
    getIdx   = lambda k:[i<(60*cur_hour+cur_min) for i in [60*h+m for h,m in dct[k]]].index(False)
    res = '%s\n'%asctime()
    try:
        idx = getIdx('xy%s'%s)
        res += '欣园：%02d:%02d\n'%(dct['xy%s'%s][idx][0],dct['xy%s'%s][idx][1])
    except:
        res += '欣园已无车\n'
    try:
        idx = getIdx('ky%s'%s)
        res += '科研楼：%02d:%02d'%(dct['ky%s'%s][idx][0],dct['ky%s'%s][idx][1])
    except:
        res += '科研楼已无车'
    return res
def bustime(option=None):
    cur_wday = localtime()[6] if option==None else int(option)
    return (bustimereturn('day') if cur_wday in [0, 1, 2, 3, 4] else (bustimereturn('end') if cur_wday in [5, 6] else '404'))
    # if cur_time_wday in [0, 1, 2, 3, 4]:
    #     return bustimereturn('day')
    # elif cur_wday in [5, 6]:
    #     return bustimereturn('end')
    # else:
    #     return '404'
